<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.od.mapper.DocMainMapper">

<!-- 미결 -->
<select  id ="mainwaitlist" resultType="com.spring.od.domain.OfficeNoticeVO">
select rownum rn, docNum,title,uname,state,regDate
FROM (select docNum,title,U.name uname,state,regDate 
				From USER_TAB1 D1
				INNER JOIN USER_TAB2 U
				ON D1.send = U.id
				WHERE D1.storage = 'wait'
				order by regDate desc )
				where ROWNUM between 0 and 20 order by desc;
</select>


<!-- 완료 -->
<select  id ="mainsuccesslist" resultType="com.spring.od.domain.OfficeNoticeVO">
select rownum rn, docNum,title,uname,regDate
FROM  (select docNum,title,U.name uname,regDate 
				From USER_TAB1 D1
				INNER JOIN USER_TAB2 U
				ON D1.send = U.id
				WHERE D1.storage = 'success'
				order by regDate desc )
				where ROWNUM between 0 and 10 order by desc;
</select>


<!-- 임시 -->
<select  id ="maintemplist" resultType="com.spring.od.domain.OfficeNoticeVO">
select rownum rn, docNum,title,uname,sysdate
FROM  (select docNum,title,U.name uname,sysdate
				From USER_TAB1 D1
				INNER JOIN USER_TAB2 U
				ON D1.send = U.id
				WHERE D1.storage = 'temp'
				order by regDate desc )
				where ROWNUM between 0 and 10 order by desc;

</select>


<!-- 검색 -->
<select id = "mainsearchlist" resultType="com.spring.od.domain.OfficeNoticeVO">
select rownum rn, docNum,title,state,storage from DOC_TAB
where 
title like '%'||#(title)||'%'
<![CDATA[ rownum <= (#{pageNum}*#{amount}))
				where rn > ((#{pageNum}-1)*#{amount})]]>
    		

</select>
	


</mapper>